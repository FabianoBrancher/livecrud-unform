{"ast":null,"code":"import _slicedToArray from \"/media/fabiano/ec991e3e-83fb-4e35-a728-0dab4543d75d/RocketSeat/livecrud/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/media/fabiano/ec991e3e-83fb-4e35-a728-0dab4543d75d/RocketSeat/livecrud/frontend/src/pages/UserForm/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Form, Input, Scope } from 'unform';\nimport * as Yup from 'yup';\nimport api from '../../services/api';\nconst schema = Yup.object().shape({\n  name: Yup.string().required('Nome obrigatório')\n});\nexport default function UserForm({\n  history,\n  match\n}) {\n  const _useState = useState({}),\n        _useState2 = _slicedToArray(_useState, 2),\n        data = _useState2[0],\n        setData = _useState2[1];\n\n  async function handleSubmit(data) {\n    await api.post('/users', data); // await api.postOrPut('/users', match.params.id, data)\n\n    history.push('/users');\n  }\n\n  useEffect(() => {\n    async function loadData() {\n      console.log(data);\n      const id = match.params.id;\n      const response = await api.get(\"/users/\".concat(id));\n      setData(response.data);\n    } // só é executado se o match.params.id existir, \n    // ou seja na criação não irá executar, apenas edição\n\n\n    if (match.params.id) {\n      loadData();\n    }\n  }, [match.params, match.params.id]);\n  return React.createElement(Form, {\n    schema: schema,\n    initialData: data,\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, React.createElement(Input, {\n    name: \"name\",\n    label: \"Nome\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }), React.createElement(Input, {\n    name: \"email\",\n    label: \"E-mail\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }), React.createElement(Scope, {\n    path: \"address\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(Input, {\n    name: \"street\",\n    label: \"Rua\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }), React.createElement(Input, {\n    name: \"number\",\n    label: \"n\\xFAmero\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, \"Enviar\"));\n}","map":{"version":3,"sources":["/media/fabiano/ec991e3e-83fb-4e35-a728-0dab4543d75d/RocketSeat/livecrud/frontend/src/pages/UserForm/index.js"],"names":["React","useState","useEffect","Form","Input","Scope","Yup","api","schema","object","shape","name","string","required","UserForm","history","match","data","setData","handleSubmit","post","push","loadData","console","log","id","params","response","get"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,KAAtB,QAAmC,QAAnC;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AAEA,MAAMC,MAAM,GAAGF,GAAG,CAACG,MAAJ,GAAaC,KAAb,CAAmB;AAC9BC,EAAAA,IAAI,EAAEL,GAAG,CAACM,MAAJ,GAAaC,QAAb,CAAsB,kBAAtB;AADwB,CAAnB,CAAf;AAIA,eAAe,SAASC,QAAT,CAAkB;AAAEC,EAAAA,OAAF;AAAWC,EAAAA;AAAX,CAAlB,EAAsC;AAAA,oBACzBf,QAAQ,CAAC,EAAD,CADiB;AAAA;AAAA,QAC1CgB,IAD0C;AAAA,QACpCC,OADoC;;AAGjD,iBAAeC,YAAf,CAA4BF,IAA5B,EAAkC;AAC9B,UAAMV,GAAG,CAACa,IAAJ,CAAS,QAAT,EAAmBH,IAAnB,CAAN,CAD8B,CAE9B;;AAEAF,IAAAA,OAAO,CAACM,IAAR,CAAa,QAAb;AACH;;AAEDnB,EAAAA,SAAS,CAAC,MAAM;AACZ,mBAAeoB,QAAf,GAA0B;AACtBC,MAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ;AADsB,YAEdQ,EAFc,GAEPT,KAAK,CAACU,MAFC,CAEdD,EAFc;AAGtB,YAAME,QAAQ,GAAG,MAAMpB,GAAG,CAACqB,GAAJ,kBAAkBH,EAAlB,EAAvB;AAEAP,MAAAA,OAAO,CAACS,QAAQ,CAACV,IAAV,CAAP;AACH,KAPW,CAQZ;AACA;;;AACA,QAAID,KAAK,CAACU,MAAN,CAAaD,EAAjB,EAAqB;AACjBH,MAAAA,QAAQ;AACX;AACJ,GAbQ,EAaN,CAACN,KAAK,CAACU,MAAP,EAAeV,KAAK,CAACU,MAAN,CAAaD,EAA5B,CAbM,CAAT;AAeA,SACI,oBAAC,IAAD;AAAM,IAAA,MAAM,EAAEjB,MAAd;AAAsB,IAAA,WAAW,EAAES,IAAnC;AAAyC,IAAA,QAAQ,EAAEE,YAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,KAAK,EAAC,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,OAAZ;AAAoB,IAAA,KAAK,EAAC,QAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAII,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,QAAZ;AAAqB,IAAA,KAAK,EAAC,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,QAAZ;AAAqB,IAAA,KAAK,EAAC,WAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAJJ,EASI;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cATJ,CADJ;AAaH","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Form, Input, Scope } from 'unform'\nimport * as Yup from 'yup'\nimport api from '../../services/api'\n\nconst schema = Yup.object().shape({\n    name: Yup.string().required('Nome obrigatório')\n})\n\nexport default function UserForm({ history, match }) {\n    const [data, setData] = useState({})\n\n    async function handleSubmit(data) {\n        await api.post('/users', data)\n        // await api.postOrPut('/users', match.params.id, data)\n\n        history.push('/users')\n    }   \n\n    useEffect(() => {\n        async function loadData() {\n            console.log(data)\n            const { id } = match.params\n            const response = await api.get(`/users/${id}`)\n\n            setData(response.data)\n        }\n        // só é executado se o match.params.id existir, \n        // ou seja na criação não irá executar, apenas edição\n        if (match.params.id) {\n            loadData()\n        }\n    }, [match.params, match.params.id])\n\n    return (\n        <Form schema={schema} initialData={data} onSubmit={handleSubmit}>\n            <Input name=\"name\" label=\"Nome\" />\n            <Input name=\"email\" label=\"E-mail\" />\n            \n            <Scope path=\"address\">\n                <Input name=\"street\" label=\"Rua\" />\n                <Input name=\"number\" label=\"número\" />\n            </Scope>\n\n            <button type=\"submit\">Enviar</button>\n        </Form>\n    )\n}"]},"metadata":{},"sourceType":"module"}